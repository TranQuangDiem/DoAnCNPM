<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>aranoz</title>
    <link rel="icon" href="img/favicon.png">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- animate CSS -->
    <link rel="stylesheet" href="css/animate.css">
    <!-- owl carousel CSS -->
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <!-- nice select CSS -->
    <link rel="stylesheet" href="css/nice-select.css">
    <!-- font awesome CSS -->
    <link rel="stylesheet" href="css/all.css">
    <!-- flaticon CSS -->
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/themify-icons.css">
    <!-- font awesome CSS -->
    <link rel="stylesheet" href="css/magnific-popup.css">
    <!-- swiper CSS -->
    <link rel="stylesheet" href="css/slick.css">
    <link rel="stylesheet" href="css/price_rangs.css">
    <!-- style CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
<!--::header part start::-->
<th:block th:include="/header.html"></th:block>
<!-- Header part end-->

<!--================Home Banner Area =================-->
<!-- breadcrumb start-->
<section class="breadcrumb breadcrumb_bg">
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="breadcrumb_iner">
                    <div class="breadcrumb_iner_item">
                        <h2>Shop Category</h2>
                        <p>Home <span>-</span> Shop Category</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- breadcrumb start-->

<!--================Category Product Area =================-->
<section class="cat_product_area section_padding">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="left_sidebar_area">
                    <aside class="left_widgets p_filter_widgets">
                        <div class="l_w_title">
                            <h3>Browse Categories</h3>
                        </div>
                        <div class="widgets_inner">
                            <ul class="list">
                                <li th:each="loai : ${loai}">
                                    <a th:href="@{/danhsachsanpham(loai=${loai})}" th:text="${loai}"></a>
                                    <!--                                        <span>(250)</span>-->
                                </li>
                            </ul>
                        </div>
                    </aside>

                    <!--                    <aside class="left_widgets p_filter_widgets">-->
                    <!--                        <div class="l_w_title">-->
                    <!--                            <h3>Product filters</h3>-->
                    <!--                        </div>-->
                    <!--                        <div class="widgets_inner">-->
                    <!--                            <ul class="list">-->
                    <!--                                <li>-->
                    <!--                                    <a href="#">Apple</a>-->
                    <!--                                </li>-->
                    <!--                                <li>-->
                    <!--                                    <a href="#">Asus</a>-->
                    <!--                                </li>-->
                    <!--                                <li class="active">-->
                    <!--                                    <a href="#">Gionee</a>-->
                    <!--                                </li>-->
                    <!--                                <li>-->
                    <!--                                    <a href="#">Micromax</a>-->
                    <!--                                </li>-->
                    <!--                                <li>-->
                    <!--                                    <a href="#">Samsung</a>-->
                    <!--                                </li>-->
                    <!--                            </ul>-->
                    <!--                        </div>-->
                    <!--                    </aside>-->

                    <aside class="left_widgets p_filter_widgets">
                        <div class="l_w_title">
                            <h3>Color Filter</h3>
                        </div>
                        <div class="widgets_inner">
                            <ul class="list">
                                <li th:each="color : ${color}">
                                    <a th:href="@{/danhsachsanpham(mausac=${color})}" th:text="${color}"></a>
                                </li>
                            </ul>
                        </div>
                    </aside>

                    <aside class="left_widgets p_filter_widgets price_rangs_aside">
                        <div class="l_w_title">
                            <h3>Price Filter</h3>
                        </div>
                        <div class="widgets_inner">
                            <div class="range_item">
                                <!-- <div id="slider-range"></div> -->
                                <input type="text" class="js-range-slider" value=""/>
                                <div class="d-flex">
                                    <div class="price_text">
                                        <p>Price :</p>
                                    </div>
                                    <div class="price_value d-flex justify-content-center">
                                        <input type="text" class="js-input-from" id="amount" readonly/>
                                        <span>to</span>
                                        <input type="text" class="js-input-to" id="amount1" readonly/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </aside>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="product_top_bar d-flex justify-content-between align-items-center">
                            <div class="single_product_menu">
                                <p><span th:text="${sum}"> </span> Prodict Found</p>
                            </div>
                            <div class="single_product_menu d-flex">
                                <h5>short by : </h5>
                                <select onchange="sapxep(this)">
                                    <option value="ten" data-display="name">name</option>
                                    <option value="gia">price</option>
                                    <!--                                    <option value="2">product</option>-->
                                </select>
                            </div>
                            <div class="single_product_menu d-flex">
                                <h5>show :</h5>
                                <div class="top_pageniation">
                                    <ul>
                                        <button style="border: 0px;background: none" onclick="hienthi(this)" value="6">6</button>
                                        <button style="border: 0px;background: none" onclick="hienthi(this)" value="9">9</button>
                                        <button style="border: 0px;background: none" onclick="hienthi(this)" value="12">12</button>
                                    </ul>
                                </div>
                            </div>
                            <div class="single_product_menu d-flex">
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="search"
                                           aria-describedby="inputGroupPrepend">
                                    <div class="input-group-prepend">
                                            <span class="input-group-text" id="inputGroupPrepend"><i
                                                    class="ti-search"></i></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row align-items-center latest_product_inner">
                    <div id="san-pham" class="row align-items-center latest_product_inner" style="width: 100%">
                        <div class="col-lg-4 col-sm-6" th:each=" product : ${productPage}">
                            <div class="single_product_item">
                                <a th:href="@{/chitietsanpham(id=${product.getId()})}">
                                    <img th:src="@{${product.getImg()}}" alt="">
                                </a>
                                <div class="single_product_text">
                                    <h4 th:text="${product.getTen()}"></h4>
                                    <h3 th:text="${product.getGia()+'VNĐ'}">$150.00</h3>
                                    <a th:onclick="'addItem('+${product.getId()}+')'" style="cursor: pointer"
                                       class="add_cart">+ add to cart<i
                                            class="ti-heart"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="pageination" th:if="${productPage.totalPages>0}">
                            <nav aria-label="Page navigation example">

                                <ul class="pagination justify-content-center">
                                    <li class="page-item" th:if="${pagePrivious!=0}">
                                        <a class="page-link" th:if="${vitri!=null&&type==null}"
                                           th:href="@{/danhsachsanpham( page=${pagePrivious},search=${vitri})}"
                                           aria-label="Previous">
                                            <i class="ti-angle-double-left"></i>
                                        </a>
                                        <a class="page-link" th:if="${type!=null&&vitri==null}"
                                           th:href="@{/danhsachsanpham( page=${pagePrivious},loai=${type})}"
                                           aria-label="Previous">
                                            <i class="ti-angle-double-left"></i>
                                        </a>
                                        <a class="page-link" th:if="${mausac!=null}"
                                           th:href="@{/danhsachsanpham( page=${pagePrivious},mausac=${mausac})}"
                                           aria-label="Previous">
                                            <i class="ti-angle-double-left"></i>
                                        </a>
                                        <a class="page-link" th:if="${mausac==null&&type==null&&vitri==null}"
                                           th:href="@{/danhsachsanpham( page=${pagePrivious})}"
                                           aria-label="Previous">
                                            <i class="ti-angle-double-left"></i>
                                        </a>
                                    </li>
                                    <th:block th:each="pageNumber : ${pageNumbers}">
                                        <li th:class="${pageNumber==productPage.number + 1} ? 'page-item'+' active'">
                                            <a class="page-link" th:if="${vitri!=null&&type==null}"
                                               th:href="@{/danhsachsanpham(page=${pageNumber},search=${vitri})}"
                                               th:text="${pageNumber}"></a>
                                            <a class="page-link" th:if="${type!=null&&vitri==null}"
                                               th:href="@{/danhsachsanpham(page=${pageNumber},loai=${type})}"
                                               th:text="${pageNumber}"></a>
                                            <a class="page-link" th:if="${mausac!=null}"
                                               th:href="@{/danhsachsanpham(page=${pageNumber},mausac=${mausac})}"
                                               th:text="${pageNumber}"></a>
                                            <a class="page-link" th:if="${mausac==null&&type==null&&vitri==null}"
                                               th:href="@{/danhsachsanpham(page=${pageNumber})}"
                                               th:text="${pageNumber}"></a>
                                        </li>
                                    </th:block>
                                    <li class="page-item" th:if="${pageMax!=0}">
                                        <a class="page-link" th:if="${vitri!=null&&type==null}"
                                           th:href="@{/danhsachsanpham(page=${pageMax},search=${vitri})}"
                                           aria-label="Next">
                                            <i class="ti-angle-double-right"></i>
                                        </a>
                                        <a class="page-link" th:if="${type!=null&&vitri==null}"
                                           th:href="@{/danhsachsanpham(page=${pageMax},loai=${type})}"
                                           aria-label="Next">
                                            <i class="ti-angle-double-right"></i>
                                        </a>
                                        <a class="page-link" th:if="${mausac!=null}"
                                           th:href="@{/danhsachsanpham(page=${pageMax},mausac=${mausac})}"
                                           aria-label="Next">
                                            <i class="ti-angle-double-right"></i>
                                        </a>
                                        <a class="page-link" th:if="${mausac==null&&type==null&&vitri==null}"
                                           th:href="@{/danhsachsanpham(page=${pageMax})}"
                                           aria-label="Next">
                                            <i class="ti-angle-double-right"></i>
                                        </a>
                                    </li>
                                </ul>

                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!--================End Category Product Area =================-->
<!--::footer_part start::-->
<th:block th:include="/footer.html"></th:block>
<!--::footer_part end::-->
<!-- jquery plugins here-->
<script src="js/jquery-1.12.1.min.js"></script>
<!-- popper js -->
<script src="js/popper.min.js"></script>
<!-- bootstrap js -->
<script src="js/bootstrap.min.js"></script>
<!-- easing js -->
<script src="js/jquery.magnific-popup.js"></script>
<!-- swiper js -->
<script src="js/swiper.min.js"></script>
<!-- swiper js -->
<script src="js/masonry.pkgd.js"></script>
<!-- particles js -->
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.nice-select.min.js"></script>
<!-- slick js -->
<script src="js/slick.min.js"></script>
<script src="js/jquery.counterup.min.js"></script>
<script src="js/waypoints.min.js"></script>
<script src="js/contact.js"></script>
<script src="js/jquery.ajaxchimp.min.js"></script>
<script src="js/jquery.form.js"></script>
<script src="js/jquery.validate.min.js"></script>
<script src="js/mail-script.js"></script>
<script src="js/stellar.js"></script>
<script src="js/price_rangs.js"></script>
<!-- custom js -->
<script src="js/custom.js"></script>

<script>
    // var id=document.getElementById('idproduct').value;
    function addItem(id) {
        $.ajax({
            url: "http://localhost:8080/them?id=" + id,
            header: {
                Accept: "application/json; charset=utf-8", "content-Type": "application/json; charset=utf-8"
            },
            success: function (data) {
                document.getElementById('soluong').innerHTML = data;
                // document.getElementById('addcart').innerHTML = "Đã thêm vào giỏ hàng";
                // document.getElementById('addcart').disabled=true;
            }
        })
    }

    function getUrlParameter(name) {
        name = name.replace(/[\[]/, '\\[').replace(/[\]]/, '\\]');
        var regex = new RegExp('[\\?&]' + name + '=([^&#]*)');
        var results = regex.exec(location.search);
        return results === null ? '' : decodeURIComponent(results[1].replace(/\+/g, ' '));
    };

    function sapxep(obj) {
        var value = obj.value;
        var loai = getUrlParameter('loai');
        var search = getUrlParameter('search');
        var page = getUrlParameter('page');
        var mausac = getUrlParameter('mausac');
        var url = "http://localhost:8080/danhsachsanpham1?sort=" + value;
        if (loai.length > 0) {
            url += "&loai=" + loai;
        }
        if (search.length > 0) {
            url += "&search=" + search;
        }
        if (page.length > 0) {
            url += "&page=" + page;
        }
        if (mausac.length > 0) {
            url += "&mausac=" + mausac;
        }
        var result = "";
        $.ajax({
            url: url,
            header: {
                Accept: "application/json; charset=utf-8", "content-Type": "application/json; charset=utf-8"
            },
            success: function (data) {
                for (var i = 0; i < data.length; i++) {
                    result += '  <div class="col-lg-4 col-sm-6">\n' +
                        '                            <div class="single_product_item">\n' +
                        '                                <a href="/chitietsanpham?id=' + data[i].id + '">\n' +
                        '                                <img src="' + data[i].img + '" alt="">\n' +
                        '                                </a>\n' +
                        '                                <div class="single_product_text">\n' +
                        '                                        <h4>' + data[i].ten + '</h4>\n' +
                        '                                    <h3>' + data[i].gia + 'VNĐ</h3>\n' +
                        '                                    <a onclick="addItem(' + data[i].id + ')" class="add_cart">+ add to cart<i class="ti-heart"></i></a>\n' +
                        '                                </div>\n' +
                        '                            </div>\n' +
                        '                        </div>'
                }
                document.getElementById("san-pham").innerHTML = result;
            }
        })
    }
    function hienthi(obj) {
        var value = obj.value;
        var loai = getUrlParameter('loai');
        var search = getUrlParameter('search');
        var page = getUrlParameter('page');
        var mausac = getUrlParameter('mausac');
        var url = "http://localhost:8080/danhsachsanpham1?size=" + value+"&sort=ten";
        if (loai.length > 0) {
            url += "&loai=" + loai;
        }
        if (search.length > 0) {
            url += "&search=" + search;
        }
        if (page.length > 0) {
            url += "&page=" + page;
        }
        if (mausac.length > 0) {
            url += "&mausac=" + mausac;
        }
        var result = "";
        $.ajax({
            url: url,
            header: {
                Accept: "application/json; charset=utf-8", "content-Type": "application/json; charset=utf-8"
            },
            success: function (data) {
                for (var i = 0; i < data.length; i++) {
                    result += '  <div class="col-lg-4 col-sm-6">\n' +
                        '                            <div class="single_product_item">\n' +
                        '                                <a href="/chitietsanpham?id=' + data[i].id + '">\n' +
                        '                                <img src="' + data[i].img + '" alt="">\n' +
                        '                                </a>\n' +
                        '                                <div class="single_product_text">\n' +
                        '                                        <h4>' + data[i].ten + '</h4>\n' +
                        '                                    <h3>' + data[i].gia + 'VNĐ</h3>\n' +
                        '                                    <a onclick="addItem(' + data[i].id + ')" class="add_cart">+ add to cart<i class="ti-heart"></i></a>\n' +
                        '                                </div>\n' +
                        '                            </div>\n' +
                        '                        </div>'
                }
                document.getElementById("san-pham").innerHTML = result;
            }
        })
    }
</script>
</body>

</html>